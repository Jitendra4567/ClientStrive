"use strict";(self.webpackChunkClientStrive=self.webpackChunkClientStrive||[]).push([[279],{7279:(T,p,s)=>{s.r(p),s.d(p,{ProjectChangesModule:()=>y});var c=s(2382),l=s(9808),d=s(459),h=s(1446),e=s(1223),g=s(520);let m=(()=>{class o{constructor(t){this.http=t}getAllProjectChange(){return this.http.get("https://freeapi.miniprojectideas.com/api/ClientStrive/GetAllProjectChange")}addUpdateProjectChange(t){return this.http.post("https://freeapi.miniprojectideas.com/api/ClientStrive/AddUpdateProjectChange",t)}deleteChangeByChangeId(t){return this.http.delete("https://freeapi.miniprojectideas.com/api/ClientStrive/DeleteChangeByChangeId?changeId="+t)}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(g.eN))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var u=s(4416),C=s(3225);const j=["modalElement"];function f(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.ALo(7,"date"),e.qZA(),e.TgZ(8,"td"),e._uU(9),e.qZA(),e.TgZ(10,"td"),e._uU(11),e.qZA(),e.TgZ(12,"td")(13,"button",35),e.NdJ("click",function(){const i=e.CHM(t).$implicit;return e.oxw().editChanges(i)}),e._UZ(14,"i",36),e.qZA(),e.TgZ(15,"button",37),e.NdJ("click",function(){const i=e.CHM(t).$implicit;return e.oxw().removeProjectChanges(i.projectChangeId)}),e._UZ(16,"i",38),e.qZA()()()}if(2&o){const t=a.$implicit;e.xp6(2),e.Oqu(t.projectName),e.xp6(2),e.Oqu(t.changeDetails),e.xp6(2),e.Oqu(e.xi3(7,5,t.changeDate,"yyyy-MM-dd HH:mm:ss")),e.xp6(3),e.Oqu(t.changeApprovedBy),e.xp6(2),e.Oqu(t.companyName)}}function Z(o,a){if(1&o&&(e.TgZ(0,"option",39),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.Q6J("value",t.clientProjectId),e.xp6(1),e.Oqu(t.projectName)}}function v(o,a){if(1&o&&(e.TgZ(0,"option",39),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.Q6J("value",t.empId),e.xp6(1),e.Oqu(t.empName)}}function _(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"button",1),e.NdJ("click",function(){return e.CHM(t),e.oxw().save()}),e._UZ(1,"i",40),e._uU(2," Save "),e.qZA()}}function b(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"button",1),e.NdJ("click",function(){return e.CHM(t),e.oxw().update()}),e._UZ(1,"i",40),e._uU(2," Update "),e.qZA()}}const A=[{path:"",component:(()=>{class o{constructor(t,n,r,i){this.projectChangesService=t,this.employeeService=n,this.projectService=r,this.fb=i,this.projectChangesFormStatus=!1}ngOnInit(){this.getAllProjectChange(),this.getAllClientProjects(),this.getAllEmployee(),this.projectChangesForm=this.fb.group({projectChangeId:0,projectId:0,changeDetails:[],changeDate:[],approvedByEmpId:0})}ngAfterViewInit(){this.modalInstance=new h.u_(this.exampleModalRef.nativeElement)}openModal(){this.projectChangesForm.reset(),this.modalInstance.show()}closeModal(){this.modalInstance.hide()}getAllProjectChange(){this.projectChangesService.getAllProjectChange().subscribe(t=>{this.projectChanges=t.data})}getAllClientProjects(){this.projectService.getAllClientProjects().subscribe(t=>{this.allProjects=t.data})}getAllEmployee(){this.employeeService.getAllEmployee().subscribe(t=>{this.allEmployee=t.data})}save(){this.projectChangesForm.value.projectChangeId||this.projectChangesForm.patchValue({projectChangeId:0}),this.projectChangesService.addUpdateProjectChange(this.projectChangesForm.value).subscribe(n=>{this.projectChangesForm.reset(),this.closeModal(),this.getAllProjectChange()})}editChanges(t){this.projectChangesFormStatus=!0,this.openModal(),Object.keys(this.projectChangesForm.controls).forEach(n=>{var r;null===(r=this.projectChangesForm.get(n))||void 0===r||r.setValue(t[n])})}update(){this.projectChangesService.addUpdateProjectChange(this.projectChangesForm.value).subscribe(n=>{console.log(n,"res"),this.projectChangesForm.reset(),this.closeModal(),this.getAllProjectChange()})}removeProjectChanges(t){this.projectChangesService.deleteChangeByChangeId(t).subscribe(n=>{console.log(n,"res"),this.getAllProjectChange()})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(m),e.Y36(u.G),e.Y36(C.m),e.Y36(c.qu))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-project-changes"]],viewQuery:function(t,n){if(1&t&&e.Gf(j,5),2&t){let r;e.iGM(r=e.CRH())&&(n.exampleModalRef=r.first)}},decls:67,vars:6,consts:[[1,"mb-3"],[1,"btn","btn-primary",3,"click"],[1,"fa-solid","fa-plus","align-middle","me-1"],[1,"card"],[1,"card-body"],[1,"d-flex","flex-wrap","align-items-center","justify-content-between"],[1,"m-0"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text","h-100"],[1,"fas","fa-search"],["type","text","placeholder","Search project",1,"form-control"],[1,"table-responsive"],[1,"table","align-middle","text-nowrap"],["scope","col"],[4,"ngFor","ngForOf"],["id","exampleModal","data-bs-backdrop","static","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],["modalElement",""],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[3,"formGroup"],[1,"form-label"],["formControlName","projectId",1,"form-select"],[3,"value",4,"ngFor","ngForOf"],["rows","5","formControlName","changeDetails",1,"form-control"],["type","datetime-local","formControlName","changeDate",1,"form-control"],["formControlName","approvedByEmpId",1,"form-select"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],[1,"fa-solid","fa-xmark","me-1"],["class","btn btn-primary",3,"click",4,"ngIf"],[1,"btn","btn-primary","btn-sm","me-2",3,"click"],[1,"fa-solid","fa-pen"],[1,"btn","btn-primary","btn-sm",3,"click"],[1,"fa-solid","fa-trash"],[3,"value"],[1,"fa-regular","fa-floppy-disk","me-1"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"button",1),e.NdJ("click",function(){return n.openModal()}),e._UZ(2,"i",2),e._uU(3," Add Project Changes "),e.qZA()(),e.TgZ(4,"div",3)(5,"div",4)(6,"div",5)(7,"h5",6),e._uU(8,"Project Changes"),e.qZA(),e.TgZ(9,"div")(10,"div",7)(11,"div",8)(12,"div",9),e._UZ(13,"i",10),e.qZA()(),e._UZ(14,"input",11),e.qZA()()(),e.TgZ(15,"div",12)(16,"table",13)(17,"thead")(18,"tr")(19,"th",14),e._uU(20,"Project Name"),e.qZA(),e.TgZ(21,"th",14),e._uU(22,"Change Details"),e.qZA(),e.TgZ(23,"th",14),e._uU(24,"Change Date"),e.qZA(),e.TgZ(25,"th",14),e._uU(26,"Change Approved By"),e.qZA(),e.TgZ(27,"th",14),e._uU(28,"Company Name"),e.qZA(),e.TgZ(29,"th",14),e._uU(30,"Action"),e.qZA()()(),e.TgZ(31,"tbody"),e.YNc(32,f,17,8,"tr",15),e.qZA()()()()(),e.TgZ(33,"div",16,17)(35,"div",18)(36,"div",19)(37,"div",20)(38,"h5",21),e._uU(39,"Add Project Changes"),e.qZA(),e._UZ(40,"button",22),e.qZA(),e.TgZ(41,"div",23)(42,"form",24)(43,"div",0)(44,"label",25),e._uU(45,"Project"),e.qZA(),e.TgZ(46,"select",26),e.YNc(47,Z,2,2,"option",27),e.qZA()(),e.TgZ(48,"div",0)(49,"label",25),e._uU(50,"Change Details"),e.qZA(),e._UZ(51,"textarea",28),e.qZA(),e.TgZ(52,"div",0)(53,"label",25),e._uU(54,"Change Date"),e.qZA(),e._UZ(55,"input",29),e.qZA(),e.TgZ(56,"div",0)(57,"label",25),e._uU(58,"Meeting Lead By Employee"),e.qZA(),e.TgZ(59,"select",30),e.YNc(60,v,2,2,"option",27),e.qZA()()()(),e.TgZ(61,"div",31)(62,"button",32),e._UZ(63,"i",33),e._uU(64," Close "),e.qZA(),e.YNc(65,_,3,0,"button",34),e.YNc(66,b,3,0,"button",34),e.qZA()()()()),2&t&&(e.xp6(32),e.Q6J("ngForOf",n.projectChanges),e.xp6(10),e.Q6J("formGroup",n.projectChangesForm),e.xp6(5),e.Q6J("ngForOf",n.allProjects),e.xp6(13),e.Q6J("ngForOf",n.allEmployee),e.xp6(5),e.Q6J("ngIf",!n.projectChangesFormStatus),e.xp6(1),e.Q6J("ngIf",n.projectChangesFormStatus))},directives:[l.sg,c._Y,c.JL,c.sg,c.EJ,c.JJ,c.u,c.YN,c.Kr,c.Fj,l.O5],pipes:[l.uU],styles:[""]}),o})()}];let P=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[d.Bz.forChild(A)],d.Bz]}),o})(),y=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[l.ez,P,c.u5,c.UX]]}),o})()}}]);