{"version":3,"file":"text-input-highlight.component.js","sources":["../src/text-input-highlight.component.ts"],"names":[],"mappings":"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","sourcesContent":["import {\n  ChangeDetectorRef,\n  Component,\n  ElementRef,\n  EventEmitter,\n  HostListener,\n  Input,\n  OnChanges,\n  OnDestroy,\n  Output,\n  Renderer2,\n  SimpleChanges,\n  ViewChild\n} from '@angular/core';\nimport { HighlightTag } from './highlight-tag.interface';\n\nconst styleProperties = Object.freeze([\n  'direction', // RTL support\n  'boxSizing',\n  'width', // on Chrome and IE, exclude the scrollbar, so the mirror div wraps exactly as the textarea does\n  'height',\n  'overflowX',\n  'overflowY', // copy the scrollbar for IE\n\n  'borderTopWidth',\n  'borderRightWidth',\n  'borderBottomWidth',\n  'borderLeftWidth',\n  'borderStyle',\n\n  'paddingTop',\n  'paddingRight',\n  'paddingBottom',\n  'paddingLeft',\n\n  // https://developer.mozilla.org/en-US/docs/Web/CSS/font\n  'fontStyle',\n  'fontVariant',\n  'fontWeight',\n  'fontStretch',\n  'fontSize',\n  'fontSizeAdjust',\n  'lineHeight',\n  'fontFamily',\n\n  'textAlign',\n  'textTransform',\n  'textIndent',\n  'textDecoration', // might not make a difference, but better be safe\n\n  'letterSpacing',\n  'wordSpacing',\n\n  'tabSize',\n  'MozTabSize'\n]);\n\nconst tagIndexIdPrefix = 'text-highlight-tag-id-';\n\nfunction indexIsInsideTag(index: number, tag: HighlightTag) {\n  return tag.indices.start < index && index < tag.indices.end;\n}\n\nfunction overlaps(tagA: HighlightTag, tagB: HighlightTag) {\n  return (\n    indexIsInsideTag(tagB.indices.start, tagA) ||\n    indexIsInsideTag(tagB.indices.end, tagA)\n  );\n}\n\nfunction isCoordinateWithinRect(rect: ClientRect, x: number, y: number) {\n  return rect.left < x && x < rect.right && (rect.top < y && y < rect.bottom);\n}\n\nfunction escapeHtml(str: string): string {\n  return str.replace(/</g, '&lt;').replace(/>/g, '&gt;');\n}\n\nexport interface TagMouseEvent {\n  tag: HighlightTag;\n  target: HTMLElement;\n  event: MouseEvent;\n}\n\n\nexport class TextInputHighlightComponent implements OnChanges, OnDestroy {\n  /**\n   * The CSS class to add to highlighted tags\n   */\n   tagCssClass: string = '';\n\n  /**\n   * An array of indices of the textarea value to highlight\n   */\n   tags: HighlightTag[] = [];\n\n  /**\n   * The textarea to highlight\n   */\n   textInputElement: HTMLTextAreaElement;\n\n  /**\n   * The textarea value, in not provided will fall back to trying to grab it automatically from the textarea\n   */\n   textInputValue: string;\n\n  /**\n   * Called when the area over a tag is clicked\n   */\n   tagClick = new EventEmitter<TagMouseEvent>();\n\n  /**\n   * Called when the area over a tag is moused over\n   */\n   tagMouseEnter = new EventEmitter<TagMouseEvent>();\n\n  /**\n   * Called when the area over the tag has the mouse is removed from it\n   */\n   tagMouseLeave = new EventEmitter<TagMouseEvent>();\n\n  /**\n   * @private\n   */\n  highlightElementContainerStyle: { [key: string]: string } = {};\n\n  /**\n   * @private\n   */\n  highlightedText: string;\n\n   private highlightElement: ElementRef;\n\n  private textareaEventListeners: Array<() => void> = [];\n\n  private highlightTagElements: Array<{\n    element: HTMLElement;\n    clientRect: ClientRect;\n  }>;\n\n  private mouseHoveredTag: TagMouseEvent | undefined;\n\n  private isDestroyed = false;\n\n  constructor(private renderer: Renderer2, private cdr: ChangeDetectorRef) {}\n\n  /**\n   * Manually call this function to refresh the highlight element if the textarea styles have changed\n   */\n  refresh() {\n    const computed: any = getComputedStyle(this.textInputElement);\n    styleProperties.forEach(prop => {\n      this.highlightElementContainerStyle[prop] = computed[prop];\n    });\n  }\n\n  /**\n   * @private\n   */\n  ngOnChanges(changes: SimpleChanges): void {\n    if (changes.textInputElement) {\n      this.textInputElementChanged();\n    }\n\n    if (changes.tags || changes.tagCssClass || changes.textInputValue) {\n      this.addTags();\n    }\n  }\n\n  /**\n   * @private\n   */\n  ngOnDestroy(): void {\n    this.isDestroyed = true;\n    this.textareaEventListeners.forEach(unregister => unregister());\n  }\n\n  /**\n   * @private\n   */\n  \n  onWindowResize() {\n    this.refresh();\n  }\n\n  private textInputElementChanged() {\n    const elementType = this.textInputElement.tagName.toLowerCase();\n    if (elementType !== 'textarea') {\n      throw new Error(\n        'The angular-text-input-highlight component must be passed ' +\n          'a textarea to the `textInputElement` input. Instead received a ' +\n          elementType\n      );\n    }\n\n    setTimeout(() => {\n      // in case the element was destroyed before the timeout fires\n      if (!this.isDestroyed) {\n        this.refresh();\n\n        this.textareaEventListeners.forEach(unregister => unregister());\n        this.textareaEventListeners = [\n          this.renderer.listen(this.textInputElement, 'input', () => {\n            this.addTags();\n          }),\n          this.renderer.listen(this.textInputElement, 'scroll', () => {\n            this.highlightElement.nativeElement.scrollTop = this.textInputElement.scrollTop;\n            this.highlightTagElements = this.highlightTagElements.map(tag => {\n              tag.clientRect = tag.element.getBoundingClientRect();\n              return tag;\n            });\n          }),\n          this.renderer.listen(this.textInputElement, 'mouseup', () => {\n            this.refresh();\n          })\n        ];\n\n        // only add event listeners if the host component actually asks for it\n        if (this.tagClick.observers.length > 0) {\n          const onClick = this.renderer.listen(\n            this.textInputElement,\n            'click',\n            event => {\n              this.handleTextareaMouseEvent(event, 'click');\n            }\n          );\n          this.textareaEventListeners.push(onClick);\n        }\n\n        if (this.tagMouseEnter.observers.length > 0) {\n          const onMouseMove = this.renderer.listen(\n            this.textInputElement,\n            'mousemove',\n            event => {\n              this.handleTextareaMouseEvent(event, 'mousemove');\n            }\n          );\n          const onMouseLeave = this.renderer.listen(\n            this.textInputElement,\n            'mouseleave',\n            event => {\n              if (this.mouseHoveredTag) {\n                this.tagMouseLeave.emit(this.mouseHoveredTag);\n                this.mouseHoveredTag = undefined;\n              }\n            }\n          );\n          this.textareaEventListeners.push(onMouseMove);\n          this.textareaEventListeners.push(onMouseLeave);\n        }\n\n        this.addTags();\n      }\n    });\n  }\n\n  private addTags() {\n    const textInputValue =\n      typeof this.textInputValue !== 'undefined'\n        ? this.textInputValue\n        : this.textInputElement.value;\n\n    const prevTags: HighlightTag[] = [];\n    const parts: string[] = [];\n\n    [...this.tags]\n      .sort((tagA, tagB) => {\n        return tagA.indices.start - tagB.indices.start;\n      })\n      .forEach(tag => {\n        if (tag.indices.start > tag.indices.end) {\n          throw new Error(\n            `Highlight tag with indices [${tag.indices.start}, ${tag.indices\n              .end}] cannot start after it ends.`\n          );\n        }\n\n        prevTags.forEach(prevTag => {\n          if (overlaps(prevTag, tag)) {\n            throw new Error(\n              `Highlight tag with indices [${tag.indices.start}, ${tag.indices\n                .end}] overlaps with tag [${prevTag.indices.start}, ${prevTag\n                .indices.end}]`\n            );\n          }\n        });\n\n        // TODO - implement this as an ngFor of items that is generated in the template for a cleaner solution\n\n        const expectedTagLength = tag.indices.end - tag.indices.start;\n        const tagContents = textInputValue.slice(\n          tag.indices.start,\n          tag.indices.end\n        );\n        if (tagContents.length === expectedTagLength) {\n          const previousIndex =\n            prevTags.length > 0 ? prevTags[prevTags.length - 1].indices.end : 0;\n          const before = textInputValue.slice(previousIndex, tag.indices.start);\n          parts.push(escapeHtml(before));\n          const cssClass = tag.cssClass || this.tagCssClass;\n          const tagId = tagIndexIdPrefix + this.tags.indexOf(tag);\n          // text-highlight-tag-id-${id} is used instead of a data attribute to prevent an angular sanitization warning\n          parts.push(\n            `<span class=\"text-highlight-tag ${tagId} ${cssClass}\">${escapeHtml(\n              tagContents\n            )}</span>`\n          );\n          prevTags.push(tag);\n        }\n      });\n    const remainingIndex =\n      prevTags.length > 0 ? prevTags[prevTags.length - 1].indices.end : 0;\n    const remaining = textInputValue.slice(remainingIndex);\n    parts.push(escapeHtml(remaining));\n    parts.push('&nbsp;');\n    this.highlightedText = parts.join('');\n    this.cdr.detectChanges();\n    this.highlightTagElements = Array.from(\n      this.highlightElement.nativeElement.getElementsByTagName('span')\n    ).map((element: HTMLElement) => {\n      return { element, clientRect: element.getBoundingClientRect() };\n    });\n  }\n\n  private handleTextareaMouseEvent(\n    event: MouseEvent,\n    eventName: 'click' | 'mousemove'\n  ) {\n    const matchingTagIndex = this.highlightTagElements.findIndex(elm =>\n      isCoordinateWithinRect(elm.clientRect, event.clientX, event.clientY)\n    );\n    if (matchingTagIndex > -1) {\n      const target = this.highlightTagElements[matchingTagIndex].element;\n      const tagClass = Array.from(target.classList).find(className =>\n        className.startsWith(tagIndexIdPrefix)\n      );\n      if (tagClass) {\n        const tagId = tagClass.replace(tagIndexIdPrefix, '');\n        const tag: HighlightTag = this.tags[+tagId];\n        const tagMouseEvent = { tag, target, event };\n        if (eventName === 'click') {\n          this.tagClick.emit(tagMouseEvent);\n        } else if (!this.mouseHoveredTag) {\n          this.mouseHoveredTag = tagMouseEvent;\n          this.tagMouseEnter.emit(tagMouseEvent);\n        }\n      }\n    } else if (eventName === 'mousemove' && this.mouseHoveredTag) {\n      this.mouseHoveredTag.event = event;\n      this.tagMouseLeave.emit(this.mouseHoveredTag);\n      this.mouseHoveredTag = undefined;\n    }\n  }\nstatic decorators: DecoratorInvocation[] = [\n{ type: Component, args: [{\n  selector: 'mwl-text-input-highlight',\n  template: `\n    <div\n      class=\"text-highlight-element\"\n      [ngStyle]=\"highlightElementContainerStyle\"\n      [innerHtml]=\"highlightedText\"\n      #highlightElement>\n    </div>\n  `\n}, ] },\n];\n/** @nocollapse */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: Renderer2, },\n{type: ChangeDetectorRef, },\n];\nstatic propDecorators: {[key: string]: DecoratorInvocation[]} = {\n'tagCssClass': [{ type: Input },],\n'tags': [{ type: Input },],\n'textInputElement': [{ type: Input },],\n'textInputValue': [{ type: Input },],\n'tagClick': [{ type: Output },],\n'tagMouseEnter': [{ type: Output },],\n'tagMouseLeave': [{ type: Output },],\n'highlightElement': [{ type: ViewChild, args: ['highlightElement', ] },],\n'onWindowResize': [{ type: HostListener, args: ['window:resize', ] },],\n};\n}\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}